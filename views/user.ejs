<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>song-recs</title>
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/font-awesome.min.css">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <h1><a href="/">song-recs</a></h1>
  <main>
    <h3 class="user-header"><%= username %>'s song-recs:</h3>
    <h4>Sort by:</h4>
    <section class="sort-buttons">
      <a href="/?sort=newest" class="<%= sortBy === 'newest' %>">Newest</a>
      <a href="/?sort=oldest" class="<%= sortBy === 'oldest' %>">Oldest</a>
      <a href="/?sort=highest" class="<%= sortBy === 'highest' %>">Most Liked</a>
      <a href="/?sort=lowest" class="<%= sortBy === 'lowest' %>">Least Liked</a>
      <a href="/?sort=username" class="<%= sortBy === 'username' %>">Username</a>
    </section>


    <section class="songs">
    <% for(var i=0; i<songs.length; i++) {%>
      <article class="song">
        <% const videoId = songs[i].song.split('v=')[1] %>
        <iframe width="300" height="169" data-song="<%= songs[i].song %>"
          src="https://www.youtube.com/embed/<%= videoId %>"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
        <section class="thumb-count" data-song="<%= songs[i].song %>" data-username="<%= songs[i].username %>">
          <span><%= songs[i].thumbUp %></span>
          <span><i class="fa fa-thumbs-up" aria-hidden="true"></i></span>
          <span><i class="fa fa-thumbs-down" aria-hidden="true"></i></span>
          <span><i class="fa fa-trash" aria-hidden="true"></i></span>
        </section>
        <p class="message-date">added on <span><%= new Date(songs[i].createdAt).toLocaleDateString() %></span> by <a href="/user/<%= songs[i].username %>"><%= songs[i].username %></a></p>
      </article>
    <% } %>
    </section>
  </main>

  <footer>
    <a
      href="https://github.com/mau11/song-recs"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Visit Song Recs GitHub Repository"
    >
      <span>
        created by mau
        <img src="/images/github-mark.png" alt="GitHub Logo" />
      </span>
    </a>
  </footer>

  <script src="main.js"></script>
</body>
</html>
